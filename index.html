

<!DOCTYPE HTML>
<html lang="en-US">
<HEAD>
   <TITLE>Class Chat</TITLE>
   <meta charset="UTF-8">
   <meta name="description" content="Class Chat">
   <meta name="author" content="Tim Reardon">
   <!--- JQuery --->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
   <!---FireBase--->
   <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
   <!---Firechat--->
   <link rel="stylesheet" href="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.css" />
   <script src="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.js"></script>
   <style>
	.error {color: #FF0000;}
   </style>
</HEAD>

<BODY style="background-color:#00e600;padding:20px;">
<img src="images/Chat_logo.png" alt="LOGO"
style="Width:200px;height:200px;display:block;margin:auto;">
<h1 style="text-align:center;">Welcome to Class Chat</h1>
<address style="text-align:center;">
Written by Group Class Chat
</address>
<p id="Message"></p>

<script src="https://www.gstatic.com/firebasejs/3.6.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCYC1dWQXfVxSdkn3Vop2D-GCLiFOwdJko",
    authDomain: "class-chat-86460.firebaseapp.com",
    databaseURL: "https://class-chat-86460.firebaseio.com",
    storageBucket: "class-chat-86460.appspot.com",
    messagingSenderId: "809093937333"
  };
  firebase.initializeApp(config);
</script>

 <script>
  function login(){
   //Log the user in via google
   var provider = new firebase.auth.GoogleAuthProvider();
   firebase.auth().signInWithPopup(provider).catch(function(error){
    console.log("Error authenticating user: ", error);});
  }

  firebase.auth().onAuthStateChanged(function(user){
   //Start chat
   if(user){
    initChat(user);
   }
  });

  function initChat(user){
   //Get Firebase database referece
   var chatRef = firebase.database().ref("channels");
   //Create Firechat instance
   var chat = new FirechatUI(chatRef, document.getElementById("firechat-wrapper"));
   //set the Firechat user
   chat.setUser(user.uid, user.displayName);
  }
 </script>
 
 <div id="firechat-wrapper">
  <button onclick="login('google');">Login with Google</button>
 </div>
</BODY>
</HTML>
